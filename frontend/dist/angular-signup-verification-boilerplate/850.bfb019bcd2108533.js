"use strict";(self.webpackChunkangular_signup_verification_boilerplate=self.webpackChunkangular_signup_verification_boilerplate||[]).push([[850],{9850:(X,f,i)=>{i.r(f),i.d(f,{WorkflowsModule:()=>W});var a=i(9351),s=i(7199),c=i(434),e=i(4292),u=i(7176),p=i(7773);const v=t=>["/workflows",t,"create"],w=(t,l,o)=>({"badge badge-warning":t,"badge badge-success":l,"badge badge-danger":o});function b(t,l){if(1&t){const o=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(o);const r=e.XpG().$implicit,d=e.XpG();return e.Njj(d.updateStatus(r.id,"Approved"))}),e.EFF(1,"Approve"),e.k0s()}}function h(t,l){if(1&t){const o=e.RV6();e.j41(0,"button",13),e.bIt("click",function(){e.eBV(o);const r=e.XpG().$implicit,d=e.XpG();return e.Njj(d.updateStatus(r.id,"Rejected"))}),e.EFF(1,"Reject"),e.k0s()}}function g(t,l){if(1&t&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"span",9),e.EFF(5),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.nI1(8,"json"),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"date"),e.k0s(),e.j41(12,"td",7),e.DNE(13,b,2,0,"button",10)(14,h,2,0,"button",11),e.k0s()()),2&t){const o=l.$implicit;e.R7$(2),e.JRh(o.type),e.R7$(2),e.Y8G("ngClass",e.sMw(12,w,"Pending"===o.status,"Approved"===o.status,"Rejected"===o.status)),e.R7$(),e.JRh(o.status),e.R7$(2),e.JRh(e.bMT(8,7,o.details)),e.R7$(3),e.JRh(e.i5U(11,9,o.createdAt,"medium")),e.R7$(3),e.Y8G("ngIf","Pending"===o.status),e.R7$(),e.Y8G("ngIf","Pending"===o.status)}}function F(t,l){1&t&&(e.j41(0,"tr")(1,"td",14),e.EFF(2,"No workflows found"),e.k0s()())}let y=(()=>{class t{route;workflowService;alertService;employeeId;workflows=[];constructor(o,n,r){this.route=o,this.workflowService=n,this.alertService=r}ngOnInit(){this.employeeId=this.route.snapshot.params.employeeId,this.workflowService.getByEmployeeId(this.employeeId).subscribe(o=>this.workflows=o)}updateStatus(o,n){this.workflowService.updateStatus(o,n).subscribe({next:()=>{this.alertService.success(`Workflow ${n} successfully`),this.workflowService.getByEmployeeId(this.employeeId).subscribe(r=>this.workflows=r)},error:r=>this.alertService.error(r)})}static \u0275fac=function(n){return new(n||t)(e.rXU(c.nX),e.rXU(u.D),e.rXU(p.u))};static \u0275cmp=e.VBU({type:t,selectors:[["ng-component"]],decls:23,vars:6,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-right"],[1,"btn","btn-primary",3,"routerLink"],[3,"ngClass"],["class","btn btn-sm btn-success mr-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-success","mr-1",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],["colspan","5",1,"text-center"]],template:function(n,r){1&n&&(e.j41(0,"div",0)(1,"h3",1),e.EFF(2),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead")(7,"tr")(8,"th"),e.EFF(9,"Type"),e.k0s(),e.j41(10,"th"),e.EFF(11,"Status"),e.k0s(),e.j41(12,"th"),e.EFF(13,"Details"),e.k0s(),e.j41(14,"th"),e.EFF(15,"Created"),e.k0s(),e.nrm(16,"th"),e.k0s()(),e.j41(17,"tbody"),e.DNE(18,g,15,16,"tr",5)(19,F,3,0,"tr",6),e.k0s()()(),e.j41(20,"div",7)(21,"a",8),e.EFF(22,"Create Workflow"),e.k0s()()()()),2&n&&(e.R7$(2),e.SpI("Workflows for Employee ",r.employeeId,""),e.R7$(16),e.Y8G("ngForOf",r.workflows),e.R7$(),e.Y8G("ngIf",!(null!=r.workflows&&r.workflows.length)),e.R7$(2),e.Y8G("routerLink",e.eq3(4,v,r.employeeId)))},dependencies:[a.YU,a.Sq,a.bT,c.Wk,a.TG,a.vh],encapsulation:2})}return t})();const m=t=>({"is-invalid":t}),C=t=>["/workflows",t];function I(t,l){1&t&&(e.j41(0,"div"),e.EFF(1,"Type is required"),e.k0s())}function j(t,l){if(1&t&&(e.j41(0,"div",15),e.DNE(1,I,2,0,"div",16),e.k0s()),2&t){const o=e.XpG();e.R7$(),e.Y8G("ngIf",o.f.type.errors.required)}}function _(t,l){1&t&&(e.j41(0,"div"),e.EFF(1,"Invalid JSON format"),e.k0s())}function E(t,l){if(1&t&&(e.j41(0,"div",15),e.DNE(1,_,2,0,"div",16),e.k0s()),2&t){const o=e.XpG();e.R7$(),e.Y8G("ngIf",o.f.details.errors.required)}}let R=(()=>{class t{formBuilder;route;router;workflowService;alertService;form;employeeId;constructor(o,n,r,d,T){this.formBuilder=o,this.route=n,this.router=r,this.workflowService=d,this.alertService=T}ngOnInit(){this.employeeId=this.route.snapshot.params.employeeId,this.form=this.formBuilder.group({type:["",s.k0.required],details:[""]})}get f(){return this.form.controls}onSubmit(){this.form.invalid||this.workflowService.create({employeeId:this.employeeId,type:this.form.value.type,details:this.form.value.details}).subscribe({next:()=>{this.alertService.success("Workflow created successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/workflows",this.employeeId])},error:n=>this.alertService.error(n)})}static \u0275fac=function(n){return new(n||t)(e.rXU(s.ok),e.rXU(c.nX),e.rXU(c.Ix),e.rXU(u.D),e.rXU(p.u))};static \u0275cmp=e.VBU({type:t,selectors:[["ng-component"]],decls:28,vars:13,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["formControlName","type",1,"form-control",3,"ngClass"],["value",""],["value","Onboarding"],["value","DepartmentChange"],["value","Termination"],["class","invalid-feedback",4,"ngIf"],["formControlName","details",1,"form-control",3,"ngClass"],[1,"text-center"],["type","submit",1,"btn","btn-primary","mr-1",3,"disabled"],[1,"btn","btn-secondary",3,"routerLink"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(n,r){1&n&&(e.j41(0,"div",0)(1,"h3",1),e.EFF(2,"Create Workflow"),e.k0s(),e.j41(3,"div",2)(4,"form",3),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(5,"div",4)(6,"label"),e.EFF(7,"Type"),e.k0s(),e.j41(8,"select",5)(9,"option",6),e.EFF(10,"Select Type"),e.k0s(),e.j41(11,"option",7),e.EFF(12,"Onboarding"),e.k0s(),e.j41(13,"option",8),e.EFF(14,"Department Change"),e.k0s(),e.j41(15,"option",9),e.EFF(16,"Termination"),e.k0s()(),e.DNE(17,j,2,1,"div",10),e.k0s(),e.j41(18,"div",4)(19,"label"),e.EFF(20,"Details (JSON)"),e.k0s(),e.nrm(21,"textarea",11),e.DNE(22,E,2,1,"div",10),e.k0s(),e.j41(23,"div",12)(24,"button",13),e.EFF(25,"Create"),e.k0s(),e.j41(26,"a",14),e.EFF(27,"Cancel"),e.k0s()()()()()),2&n&&(e.R7$(4),e.Y8G("formGroup",r.form),e.R7$(4),e.Y8G("ngClass",e.eq3(7,m,r.f.type.touched&&r.f.type.errors)),e.R7$(9),e.Y8G("ngIf",r.f.type.touched&&r.f.type.errors),e.R7$(4),e.Y8G("ngClass",e.eq3(9,m,r.f.details.touched&&r.f.details.errors)),e.R7$(),e.Y8G("ngIf",r.f.details.touched&&r.f.details.errors),e.R7$(2),e.Y8G("disabled",r.form.invalid),e.R7$(2),e.Y8G("routerLink",e.eq3(11,C,r.employeeId)))},dependencies:[a.YU,a.bT,s.qT,s.xH,s.y7,s.me,s.wz,s.BC,s.cb,s.j4,s.JD,c.Wk],encapsulation:2})}return t})();var k=i(3810),S=i(5586);const G=[{path:":employeeId",component:y,canActivate:[k.q]},{path:":employeeId/create",component:R,canActivate:[k.q],data:{roles:[S.X.Admin]}}];let $=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=e.$C({type:t});static \u0275inj=e.G2t({imports:[c.iI.forChild(G),c.iI]})}return t})(),W=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=e.$C({type:t});static \u0275inj=e.G2t({imports:[a.MD,s.X1,$]})}return t})()}}]);