"use strict";(self.webpackChunkangular_signup_verification_boilerplate=self.webpackChunkangular_signup_verification_boilerplate||[]).push([[569],{4569:(he,_,d)=>{d.r(_),d.d(_,{AccountModule:()=>_e});var s=d(7199),l=d(9351),a=d(434),e=d(4292),m=d(9933);let F=(()=>{class r{router;accountService;constructor(t,o){this.router=t,this.accountService=o,this.accountService.accountValue&&this.router.navigate(["/"])}static \u0275fac=function(o){return new(o||r)(e.rXU(a.Ix),e.rXU(m.Di))};static \u0275cmp=e.VBU({type:r,selectors:[["ng-component"]],decls:5,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-sm-8","offset-sm-2","mt-5"],[1,"card","m-3"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.nrm(4,"router-outlet"),e.k0s()()()())},dependencies:[a.n3],encapsulation:2})}return r})();var p=d(1852),C=d(6e3);const b=r=>({"is-invalid":r});function E(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Email is required"),e.k0s())}function R(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Email is invalid"),e.k0s())}function w(r,n){if(1&r&&(e.j41(0,"div",14),e.DNE(1,E,2,0,"div",15)(2,R,2,0,"div",15),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.email.errors.required),e.R7$(),e.Y8G("ngIf",t.f.email.errors.email)}}function j(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Password is required"),e.k0s())}function G(r,n){if(1&r&&(e.j41(0,"div",14),e.DNE(1,j,2,0,"div",15),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.password.errors.required)}}function I(r,n){1&r&&e.nrm(0,"span",16)}let T=(()=>{class r{formBuilder;route;router;accountService;alertService;http;form;loading=!1;submitted=!1;constructor(t,o,i,c,v,be){this.formBuilder=t,this.route=o,this.router=i,this.accountService=c,this.alertService=v,this.http=be}ngOnInit(){this.form=this.formBuilder.group({email:["",[s.k0.required,s.k0.email]],password:["",s.k0.required]});const t="/accounts/all";console.log("Attempting to fetch public accounts from:",t),this.http.get(t).subscribe({next:o=>{console.log("Successfully fetched public accounts:",o)},error:o=>{console.error("Error fetching public accounts:",o)}})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.login(this.f.email.value,this.f.password.value).pipe((0,p.$)()).subscribe({next:()=>{this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/")},error:t=>{this.alertService.error(t),this.loading=!1}}))}resetFakeBackendStorage(){localStorage.removeItem("angular-19-boilerplate-accounts"),location.reload()}static \u0275fac=function(o){return new(o||r)(e.rXU(s.ze),e.rXU(a.nX),e.rXU(a.Ix),e.rXU(m.Di),e.rXU(m.uE),e.rXU(C.Qq))};static \u0275cmp=e.VBU({type:r,selectors:[["ng-component"]],decls:24,vars:11,consts:[[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"form-row"],[1,"form-group","col"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../register",1,"btn","btn-link"],[1,"form-group","col","text-right"],["routerLink","../forgot-password",1,"btn","btn-link","pr-0"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,i){1&o&&(e.j41(0,"h3",0),e.EFF(1,"Login"),e.k0s(),e.j41(2,"div",1)(3,"form",2),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(4,"div",3)(5,"label"),e.EFF(6,"Email"),e.k0s(),e.nrm(7,"input",4),e.DNE(8,w,3,2,"div",5),e.k0s(),e.j41(9,"div",3)(10,"label"),e.EFF(11,"Password"),e.k0s(),e.nrm(12,"input",6),e.DNE(13,G,2,1,"div",5),e.k0s(),e.j41(14,"div",7)(15,"div",8)(16,"button",9),e.DNE(17,I,1,0,"span",10),e.EFF(18," Login "),e.k0s(),e.j41(19,"a",11),e.EFF(20,"Register"),e.k0s()(),e.j41(21,"div",12)(22,"a",13),e.EFF(23,"Forgot Password?"),e.k0s()()()()()),2&o&&(e.R7$(3),e.Y8G("formGroup",i.form),e.R7$(4),e.Y8G("ngClass",e.eq3(7,b,i.submitted&&i.f.email.errors)),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.email.errors),e.R7$(4),e.Y8G("ngClass",e.eq3(9,b,i.submitted&&i.f.password.errors)),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.password.errors),e.R7$(3),e.Y8G("disabled",i.loading),e.R7$(),e.Y8G("ngIf",i.loading))},dependencies:[l.YU,l.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,a.Wk],encapsulation:2})}return r})();var h=d(820);const f=r=>({"is-invalid":r});function y(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Title is required"),e.k0s())}function $(r,n){if(1&r&&(e.j41(0,"div",25),e.DNE(1,y,2,0,"div",26),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.title.errors.required)}}function Y(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"First Name is required"),e.k0s())}function P(r,n){if(1&r&&(e.j41(0,"div",25),e.DNE(1,Y,2,0,"div",26),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.firstName.errors.required)}}function N(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Last Name is required"),e.k0s())}function q(r,n){if(1&r&&(e.j41(0,"div",25),e.DNE(1,N,2,0,"div",26),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.lastName.errors.required)}}function X(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Email is required"),e.k0s())}function U(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Email must be a valid email address"),e.k0s())}function D(r,n){if(1&r&&(e.j41(0,"div",25),e.DNE(1,X,2,0,"div",26)(2,U,2,0,"div",26),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.email.errors.required),e.R7$(),e.Y8G("ngIf",t.f.email.errors.email)}}function V(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Password is required"),e.k0s())}function B(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Password must be at least 6 characters"),e.k0s())}function L(r,n){if(1&r&&(e.j41(0,"div",25),e.DNE(1,V,2,0,"div",26)(2,B,2,0,"div",26),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.password.errors.required),e.R7$(),e.Y8G("ngIf",t.f.password.errors.minlength)}}function x(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Confirm Password is required"),e.k0s())}function M(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Passwords must match"),e.k0s())}function A(r,n){if(1&r&&(e.j41(0,"div",25),e.DNE(1,x,2,0,"div",26)(2,M,2,0,"div",26),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.confirmPassword.errors.required),e.R7$(),e.Y8G("ngIf",t.f.confirmPassword.errors.mustMatch)}}function z(r,n){1&r&&(e.j41(0,"div",25),e.EFF(1,"Accept Ts & Cs is required"),e.k0s())}function O(r,n){1&r&&e.nrm(0,"span",27)}let W=(()=>{class r{formBuilder;route;router;accountService;alertService;form;loading=!1;submitted=!1;constructor(t,o,i,c,v){this.formBuilder=t,this.route=o,this.router=i,this.accountService=c,this.alertService=v}ngOnInit(){this.form=this.formBuilder.group({title:["",s.k0.required],firstName:["",s.k0.required],lastName:["",s.k0.required],email:["",[s.k0.required,s.k0.email]],password:["",[s.k0.required,s.k0.minLength(6)]],confirmPassword:["",s.k0.required],acceptTerms:[!1,s.k0.requiredTrue],status:["Enabled"]},{validator:(0,h.pk)("password","confirmPassword")})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.register(this.form.value).pipe((0,p.$)()).subscribe({next:t=>{this.alertService.success("Registration successful, please check your email for verification instructions",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:t=>{this.alertService.error(t),this.loading=!1}}))}static \u0275fac=function(o){return new(o||r)(e.rXU(s.ze),e.rXU(a.nX),e.rXU(a.Ix),e.rXU(m.Di),e.rXU(m.uE))};static \u0275cmp=e.VBU({type:r,selectors:[["ng-component"]],decls:56,vars:31,consts:[[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group","col"],["formControlName","title",1,"form-control",3,"ngClass"],["value",""],["value","Mr"],["value","Mrs"],["value","Miss"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","col-5"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"form-group"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"form-group","form-check"],["type","checkbox","formControlName","acceptTerms","id","acceptTerms",1,"form-check-input",3,"ngClass"],["for","acceptTerms",1,"form-check-label"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../login","href","",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,i){1&o&&(e.j41(0,"h3",0),e.EFF(1,"Register"),e.k0s(),e.j41(2,"div",1)(3,"form",2),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(4,"div",3)(5,"div",4)(6,"label"),e.EFF(7,"Title"),e.k0s(),e.j41(8,"select",5),e.nrm(9,"option",6),e.j41(10,"option",7),e.EFF(11,"Mr"),e.k0s(),e.j41(12,"option",8),e.EFF(13,"Mrs"),e.k0s(),e.j41(14,"option",9),e.EFF(15,"Miss"),e.k0s(),e.j41(16,"option",10),e.EFF(17,"Ms"),e.k0s()(),e.DNE(18,$,2,1,"div",11),e.k0s(),e.j41(19,"div",12)(20,"label"),e.EFF(21,"First Name"),e.k0s(),e.nrm(22,"input",13),e.DNE(23,P,2,1,"div",11),e.k0s(),e.j41(24,"div",12)(25,"label"),e.EFF(26,"Last Name"),e.k0s(),e.nrm(27,"input",14),e.DNE(28,q,2,1,"div",11),e.k0s()(),e.j41(29,"div",15)(30,"label"),e.EFF(31,"Email"),e.k0s(),e.nrm(32,"input",16),e.DNE(33,D,3,2,"div",11),e.k0s(),e.j41(34,"div",3)(35,"div",4)(36,"label"),e.EFF(37,"Password"),e.k0s(),e.nrm(38,"input",17),e.DNE(39,L,3,2,"div",11),e.k0s(),e.j41(40,"div",4)(41,"label"),e.EFF(42,"Confirm Password"),e.k0s(),e.nrm(43,"input",18),e.DNE(44,A,3,2,"div",11),e.k0s()(),e.j41(45,"div",19),e.nrm(46,"input",20),e.j41(47,"label",21),e.EFF(48,"Accept Terms & Conditions"),e.k0s(),e.DNE(49,z,2,0,"div",11),e.k0s(),e.j41(50,"div",15)(51,"button",22),e.DNE(52,O,1,0,"span",23),e.EFF(53," Register "),e.k0s(),e.j41(54,"a",24),e.EFF(55,"Cancel"),e.k0s()()()()),2&o&&(e.R7$(3),e.Y8G("formGroup",i.form),e.R7$(5),e.Y8G("ngClass",e.eq3(17,f,i.submitted&&i.f.title.errors)),e.R7$(10),e.Y8G("ngIf",i.submitted&&i.f.title.errors),e.R7$(4),e.Y8G("ngClass",e.eq3(19,f,i.submitted&&i.f.firstName.errors)),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.firstName.errors),e.R7$(4),e.Y8G("ngClass",e.eq3(21,f,i.submitted&&i.f.lastName.errors)),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.lastName.errors),e.R7$(4),e.Y8G("ngClass",e.eq3(23,f,i.submitted&&i.f.email.errors)),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.email.errors),e.R7$(5),e.Y8G("ngClass",e.eq3(25,f,i.submitted&&i.f.password.errors)),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.password.errors),e.R7$(4),e.Y8G("ngClass",e.eq3(27,f,i.submitted&&i.f.confirmPassword.errors)),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.confirmPassword.errors),e.R7$(2),e.Y8G("ngClass",e.eq3(29,f,i.submitted&&i.f.acceptTerms.errors)),e.R7$(3),e.Y8G("ngIf",i.submitted&&i.f.acceptTerms.errors),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(),e.Y8G("ngIf",i.loading))},dependencies:[l.YU,l.bT,s.qT,s.xH,s.y7,s.me,s.Zm,s.wz,s.BC,s.cb,s.j4,s.JD,a.Wk],encapsulation:2})}return r})();function J(r,n){1&r&&(e.j41(0,"div"),e.EFF(1," Verifying... "),e.k0s())}function Q(r,n){1&r&&(e.j41(0,"div"),e.EFF(1," Verification failed, you can also verify your account using the "),e.j41(2,"a",3),e.EFF(3,"forgot password"),e.k0s(),e.EFF(4," page. "),e.k0s())}var g=function(r){return r[r.Verifying=0]="Verifying",r[r.Failed=1]="Failed",r}(g||{});let H=(()=>{class r{route;router;accountService;alertService;EmailStatus=g;emailStatus=g.Verifying;constructor(t,o,i,c){this.route=t,this.router=o,this.accountService=i,this.alertService=c}ngOnInit(){this.router.navigate([],{relativeTo:this.route,replaceUrl:!0})}static \u0275fac=function(o){return new(o||r)(e.rXU(a.nX),e.rXU(a.Ix),e.rXU(m.Di),e.rXU(m.uE))};static \u0275cmp=e.VBU({type:r,selectors:[["ng-component"]],decls:5,vars:2,consts:[[1,"card-header"],[1,"card-body"],[4,"ngIf"],["routerLink","forgot-password"]],template:function(o,i){1&o&&(e.j41(0,"h3",0),e.EFF(1,"Verify Email"),e.k0s(),e.j41(2,"div",1),e.DNE(3,J,2,0,"div",2)(4,Q,5,0,"div",2),e.k0s()),2&o&&(e.R7$(3),e.Y8G("ngIf",i.emailStatus==i.EmailStatus.Verifying),e.R7$(),e.Y8G("ngIf",i.emailStatus==i.EmailStatus.Failed))},dependencies:[l.bT,a.Wk],encapsulation:2})}return r})();var K=d(6106);const Z=r=>({"is-invalid":r});function ee(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Email is required"),e.k0s())}function re(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Email is invalid"),e.k0s())}function te(r,n){if(1&r&&(e.j41(0,"div",9),e.DNE(1,ee,2,0,"div",10)(2,re,2,0,"div",10),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.email.errors.required),e.R7$(),e.Y8G("ngIf",t.f.email.errors.email)}}function ie(r,n){1&r&&e.nrm(0,"span",11)}let oe=(()=>{class r{formBuilder;accountService;alertService;form;loading=!1;submitted=!1;constructor(t,o,i){this.formBuilder=t,this.accountService=o,this.alertService=i}ngOnInit(){this.form=this.formBuilder.group({email:["",[s.k0.required,s.k0.email]]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.alertService.clear(),this.accountService.forgotPassword(this.f.email.value).pipe((0,p.$)()).pipe((0,K.j)(()=>this.loading=!1)).subscribe({next:()=>this.alertService.success("Please check your email for password reset instructions"),error:t=>this.alertService.error(t)}))}static \u0275fac=function(o){return new(o||r)(e.rXU(s.ze),e.rXU(m.Di),e.rXU(m.uE))};static \u0275cmp=e.VBU({type:r,selectors:[["ng-component"]],decls:15,vars:7,consts:[[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../login",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,i){1&o&&(e.j41(0,"h3",0),e.EFF(1,"Forgot Password"),e.k0s(),e.j41(2,"div",1)(3,"form",2),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(4,"div",3)(5,"label"),e.EFF(6,"Email"),e.k0s(),e.nrm(7,"input",4),e.DNE(8,te,3,2,"div",5),e.k0s(),e.j41(9,"div",3)(10,"button",6),e.DNE(11,ie,1,0,"span",7),e.EFF(12," Submit "),e.k0s(),e.j41(13,"a",8),e.EFF(14,"Cancel"),e.k0s()()()()),2&o&&(e.R7$(3),e.Y8G("formGroup",i.form),e.R7$(4),e.Y8G("ngClass",e.eq3(5,Z,i.submitted&&i.f.email.errors)),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.email.errors),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(),e.Y8G("ngIf",i.loading))},dependencies:[l.YU,l.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,a.Wk],encapsulation:2})}return r})();const k=r=>({"is-invalid":r});function se(r,n){1&r&&(e.j41(0,"div"),e.EFF(1," Validating token... "),e.k0s())}function ne(r,n){1&r&&(e.j41(0,"div"),e.EFF(1," Token validation failed, if the token has expired you can get a new one at the "),e.j41(2,"a",4),e.EFF(3,"forgot password"),e.k0s(),e.EFF(4," page. "),e.k0s())}function ae(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Password is required"),e.k0s())}function de(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Password must be at least 6 characters"),e.k0s())}function me(r,n){if(1&r&&(e.j41(0,"div",13),e.DNE(1,ae,2,0,"div",2)(2,de,2,0,"div",2),e.k0s()),2&r){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.f.password.errors.required),e.R7$(),e.Y8G("ngIf",t.f.password.errors.minlength)}}function le(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Confirm Password is required"),e.k0s())}function ce(r,n){1&r&&(e.j41(0,"div"),e.EFF(1,"Passwords must match"),e.k0s())}function fe(r,n){if(1&r&&(e.j41(0,"div",13),e.DNE(1,le,2,0,"div",2)(2,ce,2,0,"div",2),e.k0s()),2&r){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.f.confirmPassword.errors.required),e.R7$(),e.Y8G("ngIf",t.f.confirmPassword.errors.mustMatch)}}function ue(r,n){1&r&&e.nrm(0,"span",14)}function pe(r,n){if(1&r){const t=e.RV6();e.j41(0,"form",5),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSubmit())}),e.j41(1,"div",6)(2,"label"),e.EFF(3,"Password"),e.k0s(),e.nrm(4,"input",7),e.DNE(5,me,3,2,"div",8),e.k0s(),e.j41(6,"div",6)(7,"label"),e.EFF(8,"Confirm Password"),e.k0s(),e.nrm(9,"input",9),e.DNE(10,fe,3,2,"div",8),e.k0s(),e.j41(11,"div",6)(12,"button",10),e.DNE(13,ue,1,0,"span",11),e.EFF(14," Reset Password "),e.k0s(),e.j41(15,"a",12),e.EFF(16,"Cancel"),e.k0s()()()}if(2&r){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(4),e.Y8G("ngClass",e.eq3(7,k,t.submitted&&t.f.password.errors)),e.R7$(),e.Y8G("ngIf",t.submitted&&t.f.password.errors),e.R7$(4),e.Y8G("ngClass",e.eq3(9,k,t.submitted&&t.f.confirmPassword.errors)),e.R7$(),e.Y8G("ngIf",t.submitted&&t.f.confirmPassword.errors),e.R7$(2),e.Y8G("disabled",t.loading),e.R7$(),e.Y8G("ngIf",t.loading)}}var u=function(r){return r[r.Validating=0]="Validating",r[r.Valid=1]="Valid",r[r.Invalid=2]="Invalid",r}(u||{});const ve=[{path:"",component:F,children:[{path:"login",component:T},{path:"register",component:W},{path:"verify-email",component:H},{path:"forgot-password",component:oe},{path:"reset-password",component:(()=>{class r{formBuilder;route;router;accountService;alertService;TokenStatus=u;tokenStatus=u.Validating;token=null;form;loading=!1;submitted=!1;constructor(t,o,i,c,v){this.formBuilder=t,this.route=o,this.router=i,this.accountService=c,this.alertService=v}ngOnInit(){this.form=this.formBuilder.group({password:["",[s.k0.required,s.k0.minLength(6)]],confirmPassword:["",s.k0.required]},{validator:(0,h.pk)("password","confirmPassword")});const t=this.route.snapshot.queryParams.token,o="string"==typeof t?t:null;if(this.router.navigate([],{relativeTo:this.route,replaceUrl:!0}),!o)return this.tokenStatus=u.Invalid;this.accountService.validateResetToken(o).pipe((0,p.$)()).subscribe({next:()=>{this.token=o,this.tokenStatus=u.Valid},error:()=>{this.tokenStatus=u.Invalid}})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.resetPassword(this.token,this.f.password.value,this.f.confirmPassword.value).pipe((0,p.$)()).subscribe({next:()=>{this.alertService.success("Password reset successful, you can now login",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:t=>{this.alertService.error(t),this.loading=!1}}))}static \u0275fac=function(o){return new(o||r)(e.rXU(s.ze),e.rXU(a.nX),e.rXU(a.Ix),e.rXU(m.Di),e.rXU(m.uE))};static \u0275cmp=e.VBU({type:r,selectors:[["ng-component"]],decls:6,vars:3,consts:[[1,"card-header"],[1,"card-body"],[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["routerLink","../forgot-password"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../login",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,i){1&o&&(e.j41(0,"h3",0),e.EFF(1,"Reset Password"),e.k0s(),e.j41(2,"div",1),e.DNE(3,se,2,0,"div",2)(4,ne,5,0,"div",2)(5,pe,17,11,"form",3),e.k0s()),2&o&&(e.R7$(3),e.Y8G("ngIf",i.tokenStatus==i.TokenStatus.Validating),e.R7$(),e.Y8G("ngIf",i.tokenStatus==i.TokenStatus.Invalid),e.R7$(),e.Y8G("ngIf",i.tokenStatus==i.TokenStatus.Valid))},dependencies:[l.YU,l.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,a.Wk],encapsulation:2})}return r})()}]}];let ge=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=e.$C({type:r});static \u0275inj=e.G2t({imports:[a.iI.forChild(ve),a.iI]})}return r})(),_e=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=e.$C({type:r});static \u0275inj=e.G2t({imports:[l.MD,s.X1,ge]})}return r})()}}]);