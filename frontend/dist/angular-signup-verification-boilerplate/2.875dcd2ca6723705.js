"use strict";(self.webpackChunkangular_signup_verification_boilerplate=self.webpackChunkangular_signup_verification_boilerplate||[]).push([[2],{6002:(G,l,s)=>{s.r(l),s.d(l,{DepartmentsModule:()=>A});var m=s(9351),a=s(7199),o=s(434),t=s(4292),u=s(6287);const v=e=>["/departments/edit",e];function b(e,d){1&e&&t.nrm(0,"span",14)}function g(e,d){1&e&&(t.j41(0,"span"),t.EFF(1,"Delete"),t.k0s())}function F(e,d){if(1&e){const n=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td",9)(8,"a",11),t.EFF(9,"Edit"),t.k0s(),t.j41(10,"button",12),t.bIt("click",function(){const r=t.eBV(n).$implicit,c=t.XpG();return t.Njj(c.deleteDepartment(r.id))}),t.DNE(11,b,1,0,"span",13)(12,g,2,0,"span",8),t.k0s()()()}if(2&e){const n=d.$implicit;t.R7$(2),t.JRh(n.name),t.R7$(2),t.JRh(n.description),t.R7$(2),t.JRh(n.employeeCount||0),t.R7$(2),t.Y8G("routerLink",t.eq3(7,v,n.id)),t.R7$(2),t.Y8G("disabled",n.isDeleting),t.R7$(),t.Y8G("ngIf",n.isDeleting),t.R7$(),t.Y8G("ngIf",!n.isDeleting)}}function D(e,d){1&e&&(t.j41(0,"tr")(1,"td",15),t.EFF(2,"No departments found"),t.k0s()())}let k=(()=>{class e{departmentService;departments=[];constructor(n){this.departmentService=n}ngOnInit(){this.departmentService.getAll().subscribe(n=>this.departments=n)}deleteDepartment(n){this.departments.find(r=>r.id===n).isDeleting=!0,this.departmentService.delete(n).subscribe(()=>this.departments=this.departments.filter(r=>r.id!==n))}static \u0275fac=function(i){return new(i||e)(t.rXU(u.a))};static \u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:23,vars:2,consts:[[1,"p-4"],[1,"container"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-right"],["routerLink","/departments/add",1,"btn","btn-primary"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","3",1,"text-center"]],template:function(i,r){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.EFF(4,"Departments"),t.k0s(),t.j41(5,"div",4)(6,"div",5)(7,"table",6)(8,"thead")(9,"tr")(10,"th"),t.EFF(11,"Name"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Description"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Employee Count"),t.k0s(),t.nrm(16,"th"),t.k0s()(),t.j41(17,"tbody"),t.DNE(18,F,13,9,"tr",7)(19,D,3,0,"tr",8),t.k0s()()(),t.j41(20,"div",9)(21,"a",10),t.EFF(22,"Add Department"),t.k0s()()()()()()),2&i&&(t.R7$(18),t.Y8G("ngForOf",r.departments),t.R7$(),t.Y8G("ngIf",!(null!=r.departments&&r.departments.length)))},dependencies:[m.Sq,m.bT,o.Wk],encapsulation:2})}return e})();var E=s(7773);const C=e=>({"is-invalid":e});function j(e,d){1&e&&(t.j41(0,"div"),t.EFF(1,"Name is required"),t.k0s())}function R(e,d){if(1&e&&(t.j41(0,"div",13),t.DNE(1,j,2,0,"div",14),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",n.f.name.errors.required)}}let f=(()=>{class e{formBuilder;route;router;departmentService;alertService;form;id;isAddMode;constructor(n,i,r,c,$){this.formBuilder=n,this.route=i,this.router=r,this.departmentService=c,this.alertService=$}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({name:["",a.k0.required],description:[""]}),this.isAddMode||this.departmentService.getById(this.id).subscribe(n=>this.form.patchValue(n))}get f(){return this.form.controls}onSubmit(){this.form.invalid||(this.isAddMode?this.createDepartment():this.updateDepartment())}createDepartment(){this.departmentService.create(this.form.value).subscribe({next:()=>{this.alertService.success("Department created successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/departments"])},error:n=>this.alertService.error(n)})}updateDepartment(){this.departmentService.update(this.id,this.form.value).subscribe({next:()=>{this.alertService.success("Department updated successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/departments"])},error:n=>this.alertService.error(n)})}static \u0275fac=function(i){return new(i||e)(t.rXU(a.ok),t.rXU(o.nX),t.rXU(o.Ix),t.rXU(u.a),t.rXU(E.u))};static \u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:21,vars:7,consts:[[1,"p-4"],[1,"container"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","description",1,"form-control"],[1,"text-center"],["type","submit",1,"btn","btn-primary","mr-1",3,"disabled"],["routerLink","/departments",1,"btn","btn-secondary"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(i,r){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.EFF(4),t.k0s(),t.j41(5,"div",4)(6,"form",5),t.bIt("ngSubmit",function(){return r.onSubmit()}),t.j41(7,"div",6)(8,"label"),t.EFF(9,"Name"),t.k0s(),t.nrm(10,"input",7),t.DNE(11,R,2,1,"div",8),t.k0s(),t.j41(12,"div",6)(13,"label"),t.EFF(14,"Description"),t.k0s(),t.nrm(15,"textarea",9),t.k0s(),t.j41(16,"div",10)(17,"button",11),t.EFF(18,"Save"),t.k0s(),t.j41(19,"a",12),t.EFF(20,"Cancel"),t.k0s()()()()()()()),2&i&&(t.R7$(4),t.JRh(r.isAddMode?"Add Department":"Edit Department"),t.R7$(2),t.Y8G("formGroup",r.form),t.R7$(4),t.Y8G("ngClass",t.eq3(5,C,r.f.name.touched&&r.f.name.errors)),t.R7$(),t.Y8G("ngIf",r.f.name.touched&&r.f.name.errors),t.R7$(6),t.Y8G("disabled",r.form.invalid))},dependencies:[m.YU,m.bT,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,o.Wk],encapsulation:2})}return e})();var p=s(3810),h=s(5586);const y=[{path:"",component:k,canActivate:[p.q]},{path:"add",component:f,canActivate:[p.q],data:{roles:[h.X.Admin]}},{path:"edit/:id",component:f,canActivate:[p.q],data:{roles:[h.X.Admin]}}];let S=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({imports:[o.iI.forChild(y),o.iI]})}return e})(),A=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({imports:[m.MD,a.X1,S]})}return e})()}}]);